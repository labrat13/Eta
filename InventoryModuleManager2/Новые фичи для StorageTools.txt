Код движка Хранилищ, прямо скажем, сырой.
Я реализовал только процессы добавления и чтения записей Сущностей.
Чтобы создавать Хранилища и добавлять в них данные, и извлекать данные, и ничего кроме этого.
А полный набор нужных функций отложил до востребования.



1. Надо придумать механизм проверки наличия указанного файла по всем Хранилищам.
А то я не знаю, есть ли у меня уже такой файл в Хранилищах, или нет.
Эта функция уменьшит количество работы по новым документам.
- это требует, чтобы все Хранилища были одновременно доступны на компьютере.
Сейчас это невозможно, это только при наличии базы и NAS.

2. Надо сделать формы и функции для редактирования записей Хранилищ.
- и функции удаления файлов документов и связанных с ними записей таблиц и файлов картинок.

3. Надо сделать формы и функции для объединения записей одного и того же файла в одну.
   А то у меня много дубликатов в даташитах. 
- объединять записи должен пользователь вручную через эти формы, отбирая правильную информацию.

4. Сделать функции и формы для выявления одинаковых файлов в разных Хранилищах,
 и удаления остальных дубликатов и слияние их данных и изображений.
- надо лучше представить процессы удаления этих файлов документов и изображений, записей о Сущности.
 А то сейчас все это очень поверхностно и отрывочно представляется мне.
- сейчас если некоторой Сущности может быть сопоставлено 2 картинки или 2 документа, 
   то они в 2 записях под одним названием Сущности прописаны. Это неправильно, но приходится это терпеть.
-- так это наверно две разные сущности и только название у них общее - а надо бы различать как-то...

5. Надо переделать все процессы StorageTools, особенно в части галочки автоматического добавления.

6. Надо добавить кнопку прерывания процесса во все процедуры StorageTools.
- но измененное Хранилище при этом все равно придется заменить на первоначальную версию из архива.

7. Надо найти характерную иконку для StorageTools, а то на таскбаре ее окно не найдешь...

8. В коде StorageTools надо предусмотреть корректную обработку попытки записи в БД и архивы, 
  когда для файлов Хранилища установлен атрибут ReadOnly.
Сейчас Хранилище хранится на архивном винте и файлы имеют атрибут ReadOnly.
Этот атрибут надо снимать перед изменением Хранилища, иначе выдается исключение.
В самом исключении ничего не сказано про его причину. Хорошо что я помню.
- следует проверять наличие атрибута ReadOnly у файла БД и других файлов, и выдавать отказ, если происходит попытка записи.
  Лучше - выдавать отказ в открытии хранилища для записи, если на любом файле Хранилища есть атрибут ReadOnly.
-- тогда для проверки Хранилища чтением его можно открывать и с ReadOnly атрибутом?
-- в общем, эту часть поведения движка Хранилища тоже надо продумать.

9. В коде надо реализовать обработку ошибок при записи в Хранилище.
Нужно правильно и полностью откатывать изменения в Хранилище при ошибке в процессе.
Сейчас либо в БД остается запись, либо в архив файл уже добавлен, либо временный файл архива остается в папке документов/картинок Хранилища.
Надо сделать чтобы все было гладко.
